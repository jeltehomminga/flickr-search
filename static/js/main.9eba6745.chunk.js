(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports={photoCard:"PhotoCard_photoCard__1mobB",picture:"PhotoCard_picture__85hCO"}},27:function(e,t,a){e.exports={photoGallery:"Gallery_photoGallery__3ZEpo"}},31:function(e,t,a){e.exports=a(63)},36:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),l=(a(36),a(14)),s=a(23),i=a(2),u=Object(i.b)(function(e){return{photos:e.gallery.photos.photo,showGallery:e.gallery.showGallery,visibleCards:e.photoCard.visibleCards}},function(e){return{handleVisibleCard:function(t){return e({type:"VISIBLE",index:t})}}})(function(e){var t=e.photo,a=t.title,n=t.farm,c=t.id,o=t.server,i=t.secret,u=e.visibleCards.includes(e.index),h="https://farm".concat(n,".staticflickr.com/").concat(o,"/").concat(c,"_").concat(i);return r.a.createElement(r.a.Fragment,null,e.photo&&r.a.createElement("div",{className:l.photoCard,style:{visibility:"".concat(u&&"visible")}},r.a.createElement(s.LazyLoadComponent,{threshold:300},r.a.createElement("picture",{className:l.picture,onLoad:function(){return e.handleVisibleCard(e.index)}},r.a.createElement("source",{media:"(min-width: 1200px)",srcSet:"".concat(h,"_b.jpg")}),r.a.createElement("source",{media:"(min-width: 450px)",srcSet:"".concat(h,"_z.jpg")}),r.a.createElement("img",{src:"".concat(h,"_n.jpg"),alt:"flickr-pic"}),r.a.createElement("div",null,r.a.createElement("p",null,a))))))}),h=a(8),p=a(3),d=a(25),m=a(30),f=a(4),g={gallery:{photos:[],showGallery:!1,showPage:1},search:{newSearch:1,scrollToGallery:0,searchInput:""},photoCard:{visibleCards:[]}},b=Object(p.c)({gallery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.gallery,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH":case"NAVIGATE":return Object(f.a)({},e,{showGallery:!1});case"PHOTOS":return Object(f.a)({},e,{photos:t.photos,showGallery:!0,showPage:t.page});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.search,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH":return Object(f.a)({},e,{searchInput:t.value});case"FOCUSSEARCH":return Object(f.a)({},e,{newSearch:e.newSearch+1});case"PHOTOS":return Object(f.a)({},e,{scrollToGallery:e.scrollToGallery+1});default:return e}},photoCard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.photoCard,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VISIBLE":return e.visibleCards.includes(t.index)?e:Object(f.a)({},e,{visibleCards:[].concat(Object(m.a)(e.visibleCards),[t.index])});default:return e}}}),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,w=Object(p.e)(b,v(Object(p.a)(d.a))),E=a(26),y=a.n(E),C=function(e,t){return function(a){y()({method:"get",url:"".concat("https://api.flickr.com/services/rest/","?method=").concat(e?"flickr.photos.search":"flickr.photos.getRecent","&api_key=").concat("630045465dfbe44cc0e3c96b20164ccb","&tags=").concat(e,"&sort=relevance&safe_search=1&format=json&nojsoncallback=1&page=").concat(t)}).then(function(e){a({type:"PHOTOS",photos:e.data.photos,page:t})})}},_=Object(i.b)(function(e){return{searchInput:e.search.searchInput,currentPage:Number(e.gallery.photos.page),showGallery:e.gallery.showGallery}},function(e){return{handleNewSearch:function(){e({type:"FOCUSSEARCH"})},navigatePage:function(t){e({type:"NAVIGATE"}),w.dispatch(C(null,t+""))}}})(function(e){var t=e.searchInput,a=e.nextPage,n=e.currentPage,c=e.handleNewSearch,o=e.navigatePage,l=e.showGallery;return r.a.createElement(r.a.Fragment,null,n>1&&r.a.createElement("button",{className:h.button,value:t,onClick:function(){return o(n-1)}},"Previous Page"),l&&r.a.createElement("button",{className:h.button,value:t,onClick:c},"New Search"),a&&r.a.createElement("button",{className:h.button,value:t,onClick:function(){return o(n+1)}},"Next Page"))}),S=a(27),O=Object(i.b)(function(e){return{photos:e.gallery.photos.photo,showGallery:e.gallery.showGallery}})(function(e){var t=e.photos,a=e.showGallery,c=Object(n.useRef)();return Object(n.useEffect)(function(){a&&setTimeout(function(){window.scrollTo(0,c.current.offsetTop)},1e3)},[a]),r.a.createElement("div",{ref:c,className:S.photoGallery},t&&a&&r.a.createElement(r.a.Fragment,null,t.map(function(e,t){return r.a.createElement(u,{index:t,photo:e,key:"card-photo-".concat(t)})}),r.a.createElement(_,{nextPage:t.length>98})))}),j=a(28),x=a(9),G=Object(i.b)(function(e){return{searchInput:e.search.searchInput,newSearch:e.search.newSearch}},function(e){return{handleInputChange:function(t){e({type:"SEARCH",value:t.target.value}),w.dispatch(C(t.target.value))}}})(function(e){var t=e.newSearch,a=e.handleInputChange,c=Object(n.useRef)();return Object(n.useEffect)(function(){t&&c.current.focus()},[t]),r.a.createElement("header",{className:x.AppHeader},r.a.createElement("div",{className:x.SearchBoxContainer},r.a.createElement(j.DebounceInput,{inputRef:c,debounceTimeout:500,className:x.searchBox,name:"searchInput",onChange:a,placeholder:"Search me...",autoComplete:"off"}),r.a.createElement("h1",null,"Flickr search")))}),I=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(G,null),r.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=a(29);a.n(N).a.config(),o.a.render(r.a.createElement(i.a,{store:w},r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,a){e.exports={button:"Pagination_button__HFkvj"}},9:function(e,t,a){e.exports={AppHeader:"SearchBar_AppHeader__2JJ63",SearchBoxContainer:"SearchBar_SearchBoxContainer__3hUwf",searchBox:"SearchBar_searchBox__29Cry"}}},[[31,1,2]]]);
//# sourceMappingURL=main.9eba6745.chunk.js.map