(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports={photoCard:"PhotoCard_photoCard__1mobB",picture:"PhotoCard_picture__85hCO"}},27:function(e,t,a){e.exports={photoGallery:"Gallery_photoGallery__3ZEpo"}},31:function(e,t,a){e.exports=a(63)},36:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),l=(a(36),a(14)),s=a(23),i=a(2),u={search:function(e){return{type:"SEARCH",value:e.target.value}},visible:function(e){return{type:"VISIBLE",index:e}},focus:function(){return{type:"FOCUSSEARCH"}},navigate:function(){return{type:"NAVIGATE"}},photos:function(e,t){return{type:"PHOTOS",photos:e,page:t}}},h=Object(i.b)(function(e){var t=e.gallery,a=e.photoCard;return{photos:t.photos.photo,showGallery:t.showGallery,visibleCards:a.visibleCards}},function(e){return{handleVisibleCard:function(t){return e(u.visible(t))}}})(function(e){var t=e.photo,a=e.visibleCards,n=e.handleVisibleCard,c=e.index,o=t.title,i=t.farm,u=t.id,h=t.server,p=t.secret,d=a.includes(c),f="https://farm".concat(i,".staticflickr.com/").concat(h,"/").concat(u,"_").concat(p);return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:l.photoCard,style:{visibility:"".concat(d&&"visible")}},r.a.createElement(s.LazyLoadComponent,{threshold:300},r.a.createElement("picture",{className:l.picture,alt:o,onLoad:function(){return n(c)}},r.a.createElement("source",{media:"(min-width: 1200px)",srcSet:"".concat(f,"_b.jpg")}),r.a.createElement("source",{media:"(min-width: 450px)",srcSet:"".concat(f,"_z.jpg")}),r.a.createElement("img",{src:"".concat(f,"_n.jpg"),alt:o}),r.a.createElement("div",null,r.a.createElement("p",null,o))))))}),p=a(8),d=a(4),f=a(25),E=a(3),m={newSearch:1,scrollToGallery:0,searchInput:""},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH":return Object(E.a)({},e,{searchInput:t.value});case"FOCUSSEARCH":return Object(E.a)({},e,{newSearch:e.newSearch+1});case"PHOTOS":return Object(E.a)({},e,{scrollToGallery:e.scrollToGallery+1});default:return e}},b={photos:[],showGallery:!1,showPage:1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH":case"NAVIGATE":return Object(E.a)({},e,{showGallery:!1});case"PHOTOS":return Object(E.a)({},e,{photos:t.photos,showGallery:!0,showPage:t.page});default:return e}},g=a(30),C={visibleCards:[]},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.index;switch(a){case"VISIBLE":return e.visibleCards.includes(n)?e:Object(E.a)({},e,{visibleCards:[].concat(Object(g.a)(e.visibleCards),[n])});case"SEARCH":case"NAVIGATE":return{visibleCards:[]};default:return e}},P=Object(d.c)({gallery:v,search:_,photoCard:w}),A=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,y=Object(d.e)(P,A(Object(d.a)(f.a))),O=a(26),S=a.n(O),I=Object({NODE_ENV:"production",PUBLIC_URL:"/flickr-search",REACT_APP_API_KEY:"630045465dfbe44cc0e3c96b20164ccb",REACT_APP_API_METHOD_RECENT:"flickr.photos.getRecent",REACT_APP_API_METHOD_SEARCH:"flickr.photos.search",REACT_APP_API_URL:"https://api.flickr.com/services/rest/"}),T=I.REACT_APP_API_METHOD_SEARCH,R=I.REACT_APP_API_METHOD_RECENT,j=I.REACT_APP_API_KEY,N=I.REACT_APP_API_URL,G=function(e,t){return function(a){S.a.get(N,{params:{method:e?T:R,api_key:j,tags:e,page:t,sort:"relevance",safe_search:"1",format:"json",nojsoncallback:1}}).then(function(e){a(u.photos(e.data.photos,t))}).catch(function(e){return console.log(e)})}},H=Object(i.b)(function(e){var t=e.search,a=e.gallery;return{searchInput:t.searchInput,currentPage:Number(a.photos.page),showGallery:a.showGallery}},function(e){return{handleNewSearch:function(){e(u.focus())},navigatePage:function(t){e(u.navigate()),y.dispatch(G(null,t+""))}}})(function(e){var t=e.searchInput,a=e.nextPage,n=e.currentPage,c=e.handleNewSearch,o=e.navigatePage,l=e.showGallery;return r.a.createElement(r.a.Fragment,null,n>1&&r.a.createElement("button",{className:p.button,value:t,onClick:function(){return o(n-1)}},"Previous Page"),l&&r.a.createElement("button",{className:p.button,value:t,onClick:c},"New Search"),a&&r.a.createElement("button",{className:p.button,value:t,onClick:function(){return o(n+1)}},"Next Page"))}),k=a(27),x=Object(i.b)(function(e){return{photos:e.gallery.photos.photo,showGallery:e.gallery.showGallery}})(function(e){var t=e.photos,a=e.showGallery,c=Object(n.useRef)();return Object(n.useEffect)(function(){a&&setTimeout(function(){window.scrollTo(0,c.current.offsetTop)},1e3)},[a]),r.a.createElement("div",{ref:c,className:k.photoGallery},t&&a&&r.a.createElement(r.a.Fragment,null,t.map(function(e,t){return r.a.createElement(h,{index:t,photo:e,key:"card-photo-".concat(t)})}),r.a.createElement(H,{nextPage:t.length>98})))}),B=a(28),L=a(9),V=Object(i.b)(function(e){var t=e.search;return{searchInput:t.searchInput,newSearch:t.newSearch}},function(e){return{handleInputChange:function(t){e(u.search(t)),y.dispatch(G(t.target.value))}}})(function(e){var t=e.newSearch,a=e.handleInputChange,c=Object(n.useRef)();return Object(n.useEffect)(function(){t&&c.current.focus()},[t]),r.a.createElement("header",{className:L.AppHeader},r.a.createElement("div",{className:L.SearchContainer},r.a.createElement(B.DebounceInput,{inputRef:c,debounceTimeout:500,className:L.searchBox,name:"searchInput",onChange:a,placeholder:"Search me...",autoComplete:"off"}),r.a.createElement("h1",null,"Flickr search")))}),D=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(V,null),r.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(29);a.n(F).a.config(),o.a.render(r.a.createElement(i.a,{store:y},r.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,a){e.exports={button:"Pagination_button__HFkvj"}},9:function(e,t,a){e.exports={AppHeader:"SearchBar_AppHeader__2JJ63",SearchContainer:"SearchBar_SearchContainer__1aG7S",searchBox:"SearchBar_searchBox__29Cry"}}},[[31,1,2]]]);
//# sourceMappingURL=main.75af15ec.chunk.js.map