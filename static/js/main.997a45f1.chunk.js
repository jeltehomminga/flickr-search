(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports={photoCard:"PhotoCard_photoCard__1mobB",picture:"PhotoCard_picture__85hCO"}},27:function(e,t,a){e.exports={photoGallery:"Gallery_photoGallery__3ZEpo"}},31:function(e,t,a){e.exports=a(63)},36:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),l=(a(36),a(14)),s=a(23),i=a(2),u=Object(i.b)(function(e){return{photos:e.gallery.photos.photo,showGallery:e.gallery.showGallery,visibleCards:e.photoCard.visibleCards}},function(e){return{handleVisibleCard:function(t){return e({type:"VISIBLE",index:t})}}})(function(e){var t=e.photo,a=t.title,n=t.farm,c=t.id,o=t.server,i=t.secret,u=e.visibleCards.includes(e.index),h="https://farm".concat(n,".staticflickr.com/").concat(o,"/").concat(c,"_").concat(i);return r.a.createElement(r.a.Fragment,null,e.photo&&r.a.createElement("div",{className:l.photoCard,style:{visibility:"".concat(u&&"visible")}},r.a.createElement(s.LazyLoadComponent,{threshold:300},r.a.createElement("picture",{className:l.picture,onLoad:function(){return e.handleVisibleCard(e.index)}},r.a.createElement("source",{media:"(min-width: 1200px)",srcSet:"".concat(h,"_b.jpg")}),r.a.createElement("source",{media:"(min-width: 450px)",srcSet:"".concat(h,"_z.jpg")}),r.a.createElement("img",{src:"".concat(h,"_n.jpg"),alt:"flickr-pic"}),r.a.createElement("div",null,r.a.createElement("p",null,a))))))}),h=a(8),p=a(4),d=a(25),m=a(3),f={newSearch:1,scrollToGallery:0,searchInput:""},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH":return Object(m.a)({},e,{searchInput:t.value});case"FOCUSSEARCH":return Object(m.a)({},e,{newSearch:e.newSearch+1});case"PHOTOS":return Object(m.a)({},e,{scrollToGallery:e.scrollToGallery+1});default:return e}},g={photos:[],showGallery:!1,showPage:1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH":case"NAVIGATE":return Object(m.a)({},e,{showGallery:!1});case"PHOTOS":return Object(m.a)({},e,{photos:t.photos,showGallery:!0,showPage:t.page});default:return e}},E=a(30),w={visibleCards:[]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VISIBLE":return e.visibleCards.includes(t.index)?e:Object(m.a)({},e,{visibleCards:[].concat(Object(E.a)(e.visibleCards),[t.index])});case"SEARCH":case"NAVIGATE":return{visibleCards:[]};default:return e}},C=Object(p.c)({gallery:v,search:b,photoCard:y}),S=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,_=Object(p.e)(C,S(Object(p.a)(d.a))),O=a(26),j=a.n(O),x=function(e,t){return function(a){j()({method:"get",url:"".concat("https://api.flickr.com/services/rest/","?method=").concat(e?"flickr.photos.search":"flickr.photos.getRecent","&api_key=").concat("630045465dfbe44cc0e3c96b20164ccb","&tags=").concat(e,"&page=").concat(t,"&sort=relevance&safe_search=1&format=json&nojsoncallback=1")}).then(function(e){a({type:"PHOTOS",photos:e.data.photos,page:t})})}},G=Object(i.b)(function(e){return{searchInput:e.search.searchInput,currentPage:Number(e.gallery.photos.page),showGallery:e.gallery.showGallery}},function(e){return{handleNewSearch:function(){e({type:"FOCUSSEARCH"})},navigatePage:function(t){e({type:"NAVIGATE"}),_.dispatch(x(null,t+""))}}})(function(e){var t=e.searchInput,a=e.nextPage,n=e.currentPage,c=e.handleNewSearch,o=e.navigatePage,l=e.showGallery;return r.a.createElement(r.a.Fragment,null,n>1&&r.a.createElement("button",{className:h.button,value:t,onClick:function(){return o(n-1)}},"Previous Page"),l&&r.a.createElement("button",{className:h.button,value:t,onClick:c},"New Search"),a&&r.a.createElement("button",{className:h.button,value:t,onClick:function(){return o(n+1)}},"Next Page"))}),I=a(27),N=Object(i.b)(function(e){return{photos:e.gallery.photos.photo,showGallery:e.gallery.showGallery}})(function(e){var t=e.photos,a=e.showGallery,c=Object(n.useRef)();return Object(n.useEffect)(function(){a&&setTimeout(function(){window.scrollTo(0,c.current.offsetTop)},1e3)},[a]),r.a.createElement("div",{ref:c,className:I.photoGallery},t&&a&&r.a.createElement(r.a.Fragment,null,t.map(function(e,t){return r.a.createElement(u,{index:t,photo:e,key:"card-photo-".concat(t)})}),r.a.createElement(G,{nextPage:t.length>98})))}),P=a(28),k=a(9),A=Object(i.b)(function(e){return{searchInput:e.search.searchInput,newSearch:e.search.newSearch}},function(e){return{handleInputChange:function(t){e({type:"SEARCH",value:t.target.value}),_.dispatch(x(t.target.value))}}})(function(e){var t=e.newSearch,a=e.handleInputChange,c=Object(n.useRef)();return Object(n.useEffect)(function(){t&&c.current.focus()},[t]),r.a.createElement("header",{className:k.AppHeader},r.a.createElement("div",{className:k.SearchBoxContainer},r.a.createElement(P.DebounceInput,{inputRef:c,debounceTimeout:500,className:k.searchBox,name:"searchInput",onChange:a,placeholder:"Search me...",autoComplete:"off"}),r.a.createElement("h1",null,"Flickr search")))}),T=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(A,null),r.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=a(29);a.n(B).a.config(),o.a.render(r.a.createElement(i.a,{store:_},r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,a){e.exports={button:"Pagination_button__HFkvj"}},9:function(e,t,a){e.exports={AppHeader:"SearchBar_AppHeader__2JJ63",SearchBoxContainer:"SearchBar_SearchBoxContainer__3hUwf",searchBox:"SearchBar_searchBox__29Cry"}}},[[31,1,2]]]);
//# sourceMappingURL=main.997a45f1.chunk.js.map